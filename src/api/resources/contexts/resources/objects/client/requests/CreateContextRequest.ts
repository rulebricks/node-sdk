// This file was auto-generated by Fern from our API Definition.

/**
 * @example
 *     {
 *         name: "Customer",
 *         description: "Represents a customer in the system",
 *         schema: [{
 *                 key: "email",
 *                 name: "Email",
 *                 type: "string"
 *             }, {
 *                 key: "age",
 *                 name: "Age",
 *                 type: "number"
 *             }],
 *         identity_fact: "email"
 *     }
 */
export interface CreateContextRequest {
    /** The name of the context. */
    name: string;
    /** Optional custom slug. Auto-generated if not provided. */
    slug?: string;
    /** The description of the context. */
    description?: string;
    /** Initial schema fields for the context. At least one field must be defined. */
    schema: CreateContextRequest.Schema.Item[];
    /** The field key to use as the unique identifier for instances. Must be a key from the schema. */
    identity_fact: string;
    /** When true (default), bound rules and flows automatically execute when their inputs are satisfied. */
    auto_execute_decisions?: boolean;
    /** Time-to-live in seconds for live context instances. Instances expire after this duration. */
    ttl_seconds?: number | null;
    /** Maximum number of history entries to retain per field. */
    history_limit?: number;
    /** How to handle fields that don't match the schema. */
    on_schema_mismatch?: CreateContextRequest.OnSchemaMismatch;
    /** Webhook URL called when a rule or flow successfully solves. */
    webhook_on_solve?: string;
    /** Webhook URL called when a live context expires due to TTL. */
    webhook_on_expire?: string;
}

export namespace CreateContextRequest {
    export type Schema = Schema.Item[];

    export namespace Schema {
        export interface Item {
            key?: string;
            name?: string;
            type?: string;
            default_value?: unknown;
        }
    }

    /** How to handle fields that don't match the schema. */
    export const OnSchemaMismatch = {
        Ignore: "ignore",
        Reject: "reject",
    } as const;
    export type OnSchemaMismatch = (typeof OnSchemaMismatch)[keyof typeof OnSchemaMismatch];
}
